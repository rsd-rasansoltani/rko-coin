<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NotCoin</title>
  <link rel="stylesheet" href="./assets/css/style.css" />
  <link rel="stylesheet" href="./assets/css/responsive.css" />
  <meta name="theme-color" content="#f19e36" />
  <link rel="icon" type="image/x-icon" href="./assets/favicon/favicon.ico" />
</head>
<body>

  <div class="squad-container">
    <div class="login">
      <div class="rank-items">
        <h3 class="select-none" id="request-text" style="cursor: pointer; color: #ffd700; text-align: center;">
          Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÛŒÙˆØ³ÛŒ Ú©Ù†ÛŒØ¯
        </h3>
        <input
          type="text"
          id="telegramIdInput"
          placeholder="Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ø´Ù…Ø§"
          style="display:none; margin-top:10px; padding:5px; border-radius:6px;"
        />
        <button
          id="sendRequest"
          style="display:none; margin-top:5px; padding:5px 10px; background:#f19e36; border:none; border-radius:5px; cursor:pointer;"
        >
          Ø§Ø±Ø³Ø§Ù„
        </button>
      </div>
    </div>
  </div>

  <div class="coin-count-container">
    <img src="./assets/images/coin.png" width="45px" />
    <h1 class="select-none" id="coinCount">5537735478285462984662893766355</h1>
  </div>

  <div class="rank-container">
    <div class="rank-items">
      <h3 class="select-none">Ù‡Ø± ÛŒÙˆØ³ÛŒ Ø¨Ø±Ø§Ø¨Ø± 1000 Ø§Ù…ØªÛŒØ§Ø² Ø§Ø³Øª</h3>
    </div>
  </div>

  <div class="coin-container">
    <img src="./assets/images/golden.png" id="coin" class="select-none" width="300px" />
  </div>

  <div class="menu-container">
    <div class="power">
      <img src="./assets/images/thunder.png" width="40px" />
      <div class="power-count">
        <span id="power" class="select-none">0</span>
        <span class="gray select-none" id="total">/0</span>
      </div>
    </div>

    <div class="menu-bottuns">
      <a href="frens.html" class="button b-r">
        <img src="./assets/images/teddy-bear.png" alt="" width="28px" />
        <span class="select-none">Frens</span>
      </a>
      <a href="earn.html" class="button b-r">
        <img src="./assets/images/coin.png" alt="" width="28px" />
        <span class="select-none">Earn</span>
      </a>
      <a href="guid.html" class="button">
        <img src="./assets/images/point_up.png" alt="" width="28px" />
        <span class="select-none">Teach</span>
      </a>
    </div>
  </div>

  <div class="progress-bar">
    <div class="progress"></div>
  </div>

  <script>
    // Ù…Ù‚Ø¯Ø§Ø± Ø§ÙˆÙ„ÛŒÙ‡ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù„ÙˆÚ©Ø§Ù„
    if (!localStorage.getItem("coins")) localStorage.setItem("coins", "0");
    if (!localStorage.getItem("power")) localStorage.setItem("power", "0");
    if (!localStorage.getItem("total")) localStorage.setItem("total", "500");
    if (!localStorage.getItem("count")) localStorage.setItem("count", "1");
    if (!localStorage.getItem("user")) localStorage.setItem("user", "UNKNOWN");

    const coinImg = document.getElementById("coin");
    const coinCountText = document.getElementById("coinCount");
    const powerText = document.getElementById("power");
    const totalText = document.getElementById("total");

    // Ù†Ù…Ø§ÛŒØ´ Ù…Ù‚Ø¯Ø§Ø± Ø³Ú©Ù‡ Ùˆ Ù¾Ø§ÙˆØ± Ø¯Ø± Ù„ÙˆØ¯ ØµÙØ­Ù‡
    window.addEventListener("load", () => {
      coinCountText.innerText = localStorage.getItem("coins") || "0";
      powerText.innerText = localStorage.getItem("power") || "0";
      totalText.innerText = "/" + (localStorage.getItem("total") || "500");
    });

    // Ø§ÙØ²Ø§ÛŒØ´ Ø³Ú©Ù‡ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ ØªØµÙˆÛŒØ± Ø³Ú©Ù‡
    coinImg.addEventListener("click", () => {
      let coins = Number(localStorage.getItem("coins") || 0);
      coins++;
      localStorage.setItem("coins", coins);
      coinCountText.innerText = coins;
    });

    // Ø§ÙØ²Ø§ÛŒØ´ power Ø¨Ù‡ Ù…Ø±ÙˆØ± Ø²Ù…Ø§Ù† (Ù‡Ø± Ø«Ø§Ù†ÛŒÙ‡)
    setInterval(() => {
      let count = Number(localStorage.getItem("count") || 1);
      let total = Number(localStorage.getItem("total") || 500);
      let power = Number(localStorage.getItem("power") || 0);

      if (power < total) {
        power += count;
        if (power > total) power = total;
        localStorage.setItem("power", power);
        powerText.innerText = power;
      }
    }, 1000);

    // Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÛŒÙˆØ³ÛŒ
    const requestText = document.getElementById("request-text");
    const telegramInput = document.getElementById("telegramIdInput");
    const sendBtn = document.getElementById("sendRequest");

    requestText.addEventListener("click", () => {
      telegramInput.style.display = "block";
      sendBtn.style.display = "inline-block";
    });

    sendBtn.addEventListener("click", () => {
      const telegramId = telegramInput.value.trim();
      const coins = Number(localStorage.getItem("coins")) || 0;
      const user = localStorage.getItem("user") || "UNKNOWN";

      if (telegramId === "") {
        alert("Ù„Ø·ÙØ§Ù‹ Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.");
        return;
      }

      const botToken = "8149057930:AAE42CMnlICTkLwpPqliwYbfgvRxP0BwEAQ";
      const chatId = "7650517255";
      const message = `âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÛŒÙˆØ³ÛŒ Ø¬Ø¯ÛŒØ¯\nğŸ‘¤ Ù†Ø§Ù…: ${user}\nğŸ†” Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…: @${telegramId}\nğŸª™ Ø³Ú©Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ: ${coins}`;

      fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: chatId,
          text: message,
        }),
      })
        .then((res) => res.json())
        .then((data) => {
          if (data.ok) {
            alert("Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ âœ…");
            telegramInput.style.display = "none";
            sendBtn.style.display = "none";
          } else {
            alert("âŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ø§ Ø®Ø·Ø§ Ù…ÙˆØ§Ø¬Ù‡ Ø´Ø¯.");
          }
        })
        .catch((err) => {
          console.error(err);
          alert("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ ØªÙ„Ú¯Ø±Ø§Ù….");
        });
    });
  </script>

  <script src="./assets/js/charge.js"></script>
</body>
</html>
